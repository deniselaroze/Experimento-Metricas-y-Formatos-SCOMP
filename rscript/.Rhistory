rm(list = ls())
rm(list = ls())
args <- commandArgs(TRUE)
args<-c("F", "nivel1", "Retiro Programado", "Renta Vitalicia Inmediata simple", "b")
gender<-args[1]   ## Género
econ<-args[2]    ## SES
mode1Q<-args[3] ## primera selección modalidad
mode2Q<-args[4] ## segunda selección modalidad
pg<-args[5]
source("Treatment-Script.R")
rm(list = ls())
args <- commandArgs(TRUE)
args<-c("F", "nivel1", "Retiro Programado", "Renta Vitalicia Inmediata simple", "b")
gender<-args[1]   ## Género
econ<-args[2]    ## SES
mode1Q<-args[3] ## primera selección modalidad
mode2Q<-args[4] ## segunda selección modalidad
pg<-args[5]
source("Treatment-Script.R")
system2(paste("Treatment-Script.R",args[1], args[2], args[3], args[4], args[5]))
install.packages("randomizr")
library("randomizr", lib.loc="~/R/win-library/3.5")
library(randomizr)
blocks <- rep(c("A", "B","C"), times = c(50, 100, 200))
Z <- block_ra(blocks = blocks)
table(blocks, Z)
blocks <- rep(c("A", "B","C"), times = c(50, 100, 200))
Z <- block_ra(blocks = blocks)
table(blocks, Z)
blocks
Z <- block_ra(blocks = blocks, prob = .3)
table(blocks, Z)
Z <- block_ra(blocks = blocks, m = 20)
table(blocks, Z)
Z <- block_ra(blocks = blocks, block_m = c(20, 30, 40))
table(blocks, Z)
Z <- block_ra(blocks = blocks, num_arms = 5)
table(blocks, Z)
tmp<-function(gender, econ,mode1Q, mode2Q, pg) {
source("Treatment-Script.R")
}
tmp(args[1], args[2], args[3], args[4], args[5])
args<-c("F", "nivel1", "Retiro Programado", "Renta Vitalicia Inmediata simple", "b")
tmp(args[1], args[2], args[3], args[4], args[5])
args<-c("F", "nivel1", "Retiro Programado", "Renta Vitalicia Inmediata simple", "b")
tmp(gender=args[1], econ=args[2], mode1Q=args[3], mode2Q=args[4], pg=args[5])
tmp<-function(gender, econ,mode1Q, mode2Q, pg) {
gender<-gender  ## Género
econ<-econ   ## SES
mode1Q<-mode1Q ## primera selección modalidad
mode2Q<-mode2Q ## segunda selección modalidad
pg<-pg
source("Treatment-Script.R")
}
tmp(gender=args[1], econ=args[2], mode1Q=args[3], mode2Q=args[4], pg=args[5])
gender<-args[1]   ## Género
econ<-args[2]    ## SES
mode1Q<-args[3] ## primera selección modalidad
mode2Q<-args[4] ## segunda selección modalidad
pg<-args[5]
source("Treatment-Script.R")
blocks <- rep(c("Fnivel1", "Fnive2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnive2", "Mnivel3", "Mnivel4"), times = 300)
blocks <- rep(c("Fnivel1", "Fnive2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnive2", "Mnivel3", "Mnivel4"), times = 300)
Z <- block_ra(blocks = blocks, num_arms = 5)
table(blocks, Z)
library(randomizr)
blocks <- rep(c("Fnivel1", "Fnivel2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnivel2", "Mnivel3", "Mnivel4"), times = 300)
Z <- block_ra(blocks = blocks, num_arms = 5)
table(blocks, Z)
x<- block_ra(blocks = blocks, num_arms = 5)
table(x, Z)
if(!require(installr)) { install.packages("installr"); require(installr)} #load / install+load installr
# Installing pandoc
install.pandoc()
table(x, Z)
blocks <- rep(c("Fnivel1", "Fnivel2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnivel2", "Mnivel3", "Mnivel4"), times = 200)
blocks <- rep(c("Fnivel1", "Fnivel2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnivel2", "Mnivel3", "Mnivel4"), times = 150)
blocks <- rep(c("Fnivel1", "Fnivel2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnivel2", "Mnivel3", "Mnivel4"), times = 150)
treat1 <- rep(NA, times = 1200)
treat2 <- rep(NA, times = 1200)
tmp<-rbind(blocks, treat1, treat2)
tmp<-as.data.frame(cbind(blocks, treat1, treat2))
View(tmp)
for (i in 1:nrow(tmp)){
selected<-sample(vf, 2, replace=FALSE)
tmp$treat1<-selected[1]
tmp$treat2<-selected[2]
}
View(tmp)
vf<-c( "fcn.control",  "fcn.treat1",  "fcn.treat2",  "fcn.treat3",   "fcn.treat4")
blocks <- rep(c("Fnivel1", "Fnivel2", "Fnivel3", "Fnivel4",
"Mnivel1", "Mnivel2", "Mnivel3", "Mnivel4"), times = 150)
treat1 <- rep(NA, times = 1200)
treat2 <- rep(NA, times = 1200)
tmp<-as.data.frame(cbind(blocks, treat1, treat2))
vf<-c( "fcn.control",  "fcn.treat1",  "fcn.treat2",  "fcn.treat3",   "fcn.treat4")
#### Random treatment assignment
for (i in 1:nrow(tmp)){
selected<-sample(vf, 2, replace=FALSE)
tmp$treat1<-selected[1]
tmp$treat2<-selected[2]
}
View(tmp)
selected<-matrix(nrow = 1200, ncol = 2)
View(selected)
selected<-matrix(nrow = 1200, ncol = 2)
for (i in 1:nrow(tmp)){
selected<-sample(vf, 2, replace=FALSE)
tmp$treat1<-selected[i,1]
tmp$treat2<-selected[i,2]
}
selected<-matrix(nrow = 1200, ncol = 2)
for (i in 1:nrow(tmp)){
option<-sample(vf, 2, replace=FALSE)
selected[i, 1]<-option[1]
selected[i, 2]<-option[2]
tmp$treat1<-selected[i,1]
tmp$treat2<-selected[i,2]
}
View(tmp)
option<-sample(vf, 2, replace=FALSE)
selected[i, 1]<-option[1]
View(selected)
selected<-matrix(NA, nrow = 1200, ncol = 2)
for (i in 1:nrow(tmp)){
option<-sample(vf, 2, replace=FALSE)
selected[i, 1]<-option[1]
selected[i, 2]<-option[2]
}
tmp$treat1<-selected[, 1]
tmp$treat2<-selected[, 2]
View(tmp)
table(tmp$blocks, tmp$treat1, tmp$treat2)
table(tmp$blocks, tmp$treat1)
table(tmp$blocks, tmp$treat2)
