setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/rscript")
install.packages("plyr")
install.packages("foreign")
install.packages("ggplot2")
install.packages("stargazer")
install.packages("scales")
install.packages("gridExtra")
install.packages("xtable")
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/SP_excel")
setwd(".../GitHub/Experimento-Metricas-y-Formatos-SCOMP/SP_excel")
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/rscript")
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/SP_excel")
#setwd("C:/Users/Mauro/Desktop/SP_excel")#################################
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/Excel_SP")
rm(list = ls())
##################################
### Generating and merging files
#################################
## Leer nombre de archivos
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
table(table(all.files$perfil))
##Agrego ID Unico = Grupo + Perfil
all.files <- cbind(id = paste(all.files$grupo,all.files$perfil),all.files )
##Cambio ID a variable Categorica
str(all.files)
names(all.files)
numerize <- names(all.files)[c(1)]
for(nu in numerize){
all.files[,nu]<- as.numeric(all.files[ ,nu])
}
## Genero nuevo archivo con los cambios
write.table(all.files, "nuevaBD.csv", sep = ";", quote = F, row.names = T)
nuevaBD <- read.csv2("nuevaBD.csv", as.is = T)
library(plyr)
library(foreign)
library(ggplot2)
theme_set(theme_bw())
library(stargazer)
#library(reshape2)
#library(CBPS)
library(scales)
library(gridExtra)
#library(effects)
#library(plm)
#library(lmtest)
library(xtable)
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
table(table(all.files$perfil))
##Agrego ID Unico = Grupo + Perfil
all.files <- cbind(id = paste(all.files$grupo,all.files$perfil),all.files )
#setwd("C:/Users/Mauro/Desktop/SP_excel")#################################
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP")
perfil.files <- list.files("./Excel_SP/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
perfil.files <- list.files("/Excel_SP/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
#setwd("C:/Users/Mauro/Desktop/SP_excel")#################################
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/Excel_SP")
perfil.files <- list.files(recursive = T, pattern = 'co_.+csv', full.names = T)
perfil.files <- list.files(recursive = T, pattern = 'co_.+csv', full.names = T)
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/Excel_SP")
rm(list = ls())
##################################
### Generating and merging files
#################################
## Leer nombre de archivos
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
#setwd("C:/Users/Mauro/Desktop/SP_excel")#################################
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/Excel_SP")
rm(list = ls())
##################################
### Generating and merging files
#################################
## Leer nombre de archivos
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
table(table(all.files$perfil))
str(all.files)
names(all.files)
numerize <- names(all.files)[c(1)]
for(nu in numerize){
all.files[,nu]<- as.numeric(all.files[ ,nu])
}
View(all.files)
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
table(table(all.files$perfil))
##Agrego ID Unico = Grupo + Perfil
all.files <- cbind(id = paste(all.files$grupo,all.files$perfil),all.files )
View(all.files)
View(all.files)
all.files$nu<-as.numeric(all.files$id)
View(all.files)
write.table(all.files, "nuevaBD.csv", sep = ";", quote = F, row.names = T)
data_sub <- subset(all.files, (all.files$nu==1))
View(data_sub)
library(plyr)
library(foreign)
library(ggplot2)
theme_set(theme_bw())
library(stargazer)
#library(reshape2)
#library(CBPS)
library(scales)
library(gridExtra)
#library(effects)
#library(plm)
#library(lmtest)
library(xtable)
#setwd("C:/Users/Mauro/Desktop/SP_excel")#################################
setwd("~/GitHub/Experimento-Metricas-y-Formatos-SCOMP/Excel_SP")
rm(list = ls())
###########################################
### Creando un s贸lo DF con todas los datos
###########################################
## Leer nombre de archivos
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
table(table(all.files$perfil))
##Agrego ID Unico = Grupo + Perfil
all.files <- cbind(id = paste0(all.files$grupo,all.files$perfil, sep="."),all.files )
View(all.files)
all.files <- cbind(id = paste0(all.files$grupo,".", all.files$perfil),all.files )
View(all.files)
rm(list = ls())
###########################################
### Creando un s贸lo DF con todas los datos
###########################################
## Leer nombre de archivos
perfil.files <- list.files("./CSV/", recursive = T, pattern = 'co_.+csv', full.names = T)
##Leer Columnas
all.files <- NULL
for(bf in perfil.files){
temp <- read.csv2(bf, as.is = T)
valid_col <- ncol(temp)-3
for(i in 1:valid_col)temp[ , i] <- gsub("\\s","", temp[, i])
all.files <- rbind.fill(all.files, temp)
}
table(table(all.files$perfil))
##Agrego ID Unico = Grupo + Perfil
all.files <- cbind(id = paste0(all.files$grupo,".", all.files$perfil),all.files )
write.table(all.files, "nuevaBD.csv", sep = ";", quote = F, row.names = T)
nuevaBD <- read.csv2("nuevaBD.csv", as.is = T)
data_sub <- subset(all.files, (all.files$nu==1))
tbl<-ddply(data_sub, ~ perfil, summarize,
razon_social = data_sub$razon_social,
pension_bruta = data_sub$val_uf_pension_bru,
riesgo = data_sub$riesgo
)
View(tbl)
data_sub <- subset(all.files, (all.files$nu==1))
all.files$nu<-as.numeric(all.files$id)
data_sub <- subset(all.files, (all.files$nu==1))
data_sub <- subset(all.files, nu==1)
View(data_sub)
tbl<-all.files[all.files$nu==1, c("razon_social", "pension_bruta", "riesgo")]
names(all.files)
tbl<-all.files[all.files$nu==1, c("razon_social", "val_uf_pension_bru", "riesgo")]
names(tbl)<-c("Valor Pensi贸n", "Razon Social", "Clasificaci贸n de Riesgo")
xtable(tbl, caption="Treatment Summaries", label="table:sum")
tbl<-xtable(tbl, caption="Control", type="html", file="control.html" )
print(tbl)
xtable(tbl, caption="Control", type="html", file="control.html" )
print.xtable(tbl)
print(tbl, type="HTML", file="control.html"  )
tbl
print(tbl, type="HTML", file="control.html", include.rownames=FALSE  )
print(tbl, type="HTML", file="Tratamientos/control.html", include.rownames=FALSE  )
